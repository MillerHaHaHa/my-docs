<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>fw_printfenv 使用 | Miller の 文档库</title><meta name="description" content="记录各种折腾笔记">
    <link rel="preload" href="/my-docs/assets/style-C3ozQjM4.css" as="style"><link rel="stylesheet" href="/my-docs/assets/style-C3ozQjM4.css">
    <link rel="modulepreload" href="/my-docs/assets/app-CmOngkEL.js"><link rel="modulepreload" href="/my-docs/assets/fw_printfenv使用.html-B5dc2nNf.js">
    <link rel="prefetch" href="/my-docs/assets/index.html-BT7fGLJ6.js" as="script"><link rel="prefetch" href="/my-docs/assets/get-started.html-DWX_LKOq.js" as="script"><link rel="prefetch" href="/my-docs/assets/文档库介绍.html-Dyk3CpVa.js" as="script"><link rel="prefetch" href="/my-docs/assets/windows激活.html-BMwKohCD.js" as="script"><link rel="prefetch" href="/my-docs/assets/gperf使用.html-CEigzXgx.js" as="script"><link rel="prefetch" href="/my-docs/assets/linux开发常用bashrc配置.html-DtYFgNpS.js" as="script"><link rel="prefetch" href="/my-docs/assets/nfs安装和使用.html-8_KLrofJ.js" as="script"><link rel="prefetch" href="/my-docs/assets/nginx安装和使用.html-BHGB15Nv.js" as="script"><link rel="prefetch" href="/my-docs/assets/nodejs安装和使用.html-C1q96xfg.js" as="script"><link rel="prefetch" href="/my-docs/assets/tc流控.html-B0o0X6Bi.js" as="script"><link rel="prefetch" href="/my-docs/assets/ufw使用.html-A3titfpf.js" as="script"><link rel="prefetch" href="/my-docs/assets/docker搭建nextcloud.html-DVZ8KRH4.js" as="script"><link rel="prefetch" href="/my-docs/assets/nextcloud安装和使用.html-U941YX_X.js" as="script"><link rel="prefetch" href="/my-docs/assets/qbittorrent使用.html-Bx4myX-E.js" as="script"><link rel="prefetch" href="/my-docs/assets/ssh多次登录失败加入黑名单.html-wU98LdvU.js" as="script"><link rel="prefetch" href="/my-docs/assets/IPC名词.html-D_cScuu6.js" as="script"><link rel="prefetch" href="/my-docs/assets/UART1的使用.html-C9HDhq_e.js" as="script"><link rel="prefetch" href="/my-docs/assets/coredump调试.html-DWKbmY3L.js" as="script"><link rel="prefetch" href="/my-docs/assets/lvgl调试.html-Bf38EUAi.js" as="script"><link rel="prefetch" href="/my-docs/assets/sdiowifi驱动适配.html-obwj1axR.js" as="script"><link rel="prefetch" href="/my-docs/assets/快速修改内核配置.html-C-u8Oovg.js" as="script"><link rel="prefetch" href="/my-docs/assets/板子配置.html-CxBZFhyi.js" as="script"><link rel="prefetch" href="/my-docs/assets/板端常用命令.html-DXhp3qRR.js" as="script"><link rel="prefetch" href="/my-docs/assets/设置登录密码.html-DNakUgb9.js" as="script"><link rel="prefetch" href="/my-docs/assets/配置USB网卡.html-B3jVfnFp.js" as="script"><link rel="prefetch" href="/my-docs/assets/配置USB虚拟U盘.html-DUhFwJr_.js" as="script"><link rel="prefetch" href="/my-docs/assets/404.html-DqrPH7_w.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/my-docs/"><img class="logo" src="https://images-1306478114.cos.ap-guangzhou.myqcloud.com/%E4%B9%A6%E6%9E%B6%E9%80%89%E4%B8%AD.svg" alt="Miller の 文档库"><span class="site-name can-hide" aria-hidden="true">Miller の 文档库</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Common</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/common/windows%E6%BF%80%E6%B4%BB.html" aria-label="windows 激活"><!--[--><!--[--><!--]--> windows 激活 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Linux</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/linux%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8bashrc%E9%85%8D%E7%BD%AE.html" aria-label="linux 开发常用 bashrc 配置"><!--[--><!--[--><!--]--> linux 开发常用 bashrc 配置 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/gperf%E4%BD%BF%E7%94%A8.html" aria-label="gperftools 使用"><!--[--><!--[--><!--]--> gperftools 使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/nfs%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nfs 安装和使用"><!--[--><!--[--><!--]--> nfs 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/nginx%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nginx 安装和使用"><!--[--><!--[--><!--]--> nginx 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/nodejs%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nodejs 安装和使用"><!--[--><!--[--><!--]--> nodejs 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/tc%E6%B5%81%E6%8E%A7.html" aria-label="tc 流控"><!--[--><!--[--><!--]--> tc 流控 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/ufw%E4%BD%BF%E7%94%A8.html" aria-label="ufw 使用"><!--[--><!--[--><!--]--> ufw 使用 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Nas</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/docker%E6%90%AD%E5%BB%BAnextcloud.html" aria-label="docker 搭建 nextcloud"><!--[--><!--[--><!--]--> docker 搭建 nextcloud <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/nextcloud%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nextcloud 安装和使用"><!--[--><!--[--><!--]--> nextcloud 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/qbittorrent%E4%BD%BF%E7%94%A8.html" aria-label="qbittorrent 使用"><!--[--><!--[--><!--]--> qbittorrent 使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/ssh%E5%A4%9A%E6%AC%A1%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E5%8A%A0%E5%85%A5%E9%BB%91%E5%90%8D%E5%8D%95.html" aria-label="ssh 多次登录失败加入黑名单"><!--[--><!--[--><!--]--> ssh 多次登录失败加入黑名单 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工作"><span class="title">工作</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工作"><span class="title">工作</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Goke</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/coredump%E8%B0%83%E8%AF%95.html" aria-label="core dump 调试"><!--[--><!--[--><!--]--> core dump 调试 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link route-link-active" href="/my-docs/work/goke/fw_printfenv%E4%BD%BF%E7%94%A8.html" aria-label="fw_printfenv 使用"><!--[--><!--[--><!--]--> fw_printfenv 使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/IPC%E5%90%8D%E8%AF%8D.html" aria-label="IPC 名词"><!--[--><!--[--><!--]--> IPC 名词 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/lvgl%E8%B0%83%E8%AF%95.html" aria-label="lvgl 调试"><!--[--><!--[--><!--]--> lvgl 调试 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/sdiowifi%E9%A9%B1%E5%8A%A8%E9%80%82%E9%85%8D.html" aria-label="sdio wifi 驱动适配"><!--[--><!--[--><!--]--> sdio wifi 驱动适配 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/UART1%E7%9A%84%E4%BD%BF%E7%94%A8.html" aria-label="UART1 的使用"><!--[--><!--[--><!--]--> UART1 的使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E5%BF%AB%E9%80%9F%E4%BF%AE%E6%94%B9%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE.html" aria-label="快速修改内核配置"><!--[--><!--[--><!--]--> 快速修改内核配置 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E6%9D%BF%E5%AD%90%E9%85%8D%E7%BD%AE.html" aria-label="/work/goke/%E6%9D%BF%E5%AD%90%E9%85%8D%E7%BD%AE.html"><!--[--><!--[--><!--]--> /work/goke/%E6%9D%BF%E5%AD%90%E9%85%8D%E7%BD%AE.html <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E6%9D%BF%E7%AB%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="板端常用命令"><!--[--><!--[--><!--]--> 板端常用命令 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E8%AE%BE%E7%BD%AE%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81.html" aria-label="设置登录密码"><!--[--><!--[--><!--]--> 设置登录密码 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E9%85%8D%E7%BD%AEUSB%E7%BD%91%E5%8D%A1.html" aria-label="如何使用 USB 网卡"><!--[--><!--[--><!--]--> 如何使用 USB 网卡 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E9%85%8D%E7%BD%AEUSB%E8%99%9A%E6%8B%9FU%E7%9B%98.html" aria-label="配置 USB 虚拟 U 盘"><!--[--><!--[--><!--]--> 配置 USB 虚拟 U 盘 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学习"><span class="title">学习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学习"><span class="title">学习</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Common</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/common/windows%E6%BF%80%E6%B4%BB.html" aria-label="windows 激活"><!--[--><!--[--><!--]--> windows 激活 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Linux</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/linux%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8bashrc%E9%85%8D%E7%BD%AE.html" aria-label="linux 开发常用 bashrc 配置"><!--[--><!--[--><!--]--> linux 开发常用 bashrc 配置 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/gperf%E4%BD%BF%E7%94%A8.html" aria-label="gperftools 使用"><!--[--><!--[--><!--]--> gperftools 使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/nfs%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nfs 安装和使用"><!--[--><!--[--><!--]--> nfs 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/nginx%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nginx 安装和使用"><!--[--><!--[--><!--]--> nginx 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/nodejs%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nodejs 安装和使用"><!--[--><!--[--><!--]--> nodejs 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/tc%E6%B5%81%E6%8E%A7.html" aria-label="tc 流控"><!--[--><!--[--><!--]--> tc 流控 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/linux/ufw%E4%BD%BF%E7%94%A8.html" aria-label="ufw 使用"><!--[--><!--[--><!--]--> ufw 使用 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Nas</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/docker%E6%90%AD%E5%BB%BAnextcloud.html" aria-label="docker 搭建 nextcloud"><!--[--><!--[--><!--]--> docker 搭建 nextcloud <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/nextcloud%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8.html" aria-label="nextcloud 安装和使用"><!--[--><!--[--><!--]--> nextcloud 安装和使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/qbittorrent%E4%BD%BF%E7%94%A8.html" aria-label="qbittorrent 使用"><!--[--><!--[--><!--]--> qbittorrent 使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/learn/nas/ssh%E5%A4%9A%E6%AC%A1%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E5%8A%A0%E5%85%A5%E9%BB%91%E5%90%8D%E5%8D%95.html" aria-label="ssh 多次登录失败加入黑名单"><!--[--><!--[--><!--]--> ssh 多次登录失败加入黑名单 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工作"><span class="title">工作</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工作"><span class="title">工作</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Goke</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/coredump%E8%B0%83%E8%AF%95.html" aria-label="core dump 调试"><!--[--><!--[--><!--]--> core dump 调试 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link route-link-active" href="/my-docs/work/goke/fw_printfenv%E4%BD%BF%E7%94%A8.html" aria-label="fw_printfenv 使用"><!--[--><!--[--><!--]--> fw_printfenv 使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/IPC%E5%90%8D%E8%AF%8D.html" aria-label="IPC 名词"><!--[--><!--[--><!--]--> IPC 名词 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/lvgl%E8%B0%83%E8%AF%95.html" aria-label="lvgl 调试"><!--[--><!--[--><!--]--> lvgl 调试 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/sdiowifi%E9%A9%B1%E5%8A%A8%E9%80%82%E9%85%8D.html" aria-label="sdio wifi 驱动适配"><!--[--><!--[--><!--]--> sdio wifi 驱动适配 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/UART1%E7%9A%84%E4%BD%BF%E7%94%A8.html" aria-label="UART1 的使用"><!--[--><!--[--><!--]--> UART1 的使用 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E5%BF%AB%E9%80%9F%E4%BF%AE%E6%94%B9%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE.html" aria-label="快速修改内核配置"><!--[--><!--[--><!--]--> 快速修改内核配置 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E6%9D%BF%E5%AD%90%E9%85%8D%E7%BD%AE.html" aria-label="/work/goke/%E6%9D%BF%E5%AD%90%E9%85%8D%E7%BD%AE.html"><!--[--><!--[--><!--]--> /work/goke/%E6%9D%BF%E5%AD%90%E9%85%8D%E7%BD%AE.html <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E6%9D%BF%E7%AB%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="板端常用命令"><!--[--><!--[--><!--]--> 板端常用命令 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E8%AE%BE%E7%BD%AE%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81.html" aria-label="设置登录密码"><!--[--><!--[--><!--]--> 设置登录密码 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E9%85%8D%E7%BD%AEUSB%E7%BD%91%E5%8D%A1.html" aria-label="如何使用 USB 网卡"><!--[--><!--[--><!--]--> 如何使用 USB 网卡 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-subitem"><a class="route-link" href="/my-docs/work/goke/%E9%85%8D%E7%BD%AEUSB%E8%99%9A%E6%8B%9FU%E7%9B%98.html" aria-label="配置 USB 虚拟 U 盘"><!--[--><!--[--><!--]--> 配置 USB 虚拟 U 盘 <!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">fw_printfenv 使用 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#一、编译" aria-label="一、编译"><!--[--><!--[--><!--]--> 一、编译 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#二、内核配置" aria-label="二、内核配置"><!--[--><!--[--><!--]--> 二、内核配置 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#三、修改配置文件" aria-label="三、修改配置文件"><!--[--><!--[--><!--]--> 三、修改配置文件 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#四、使用" aria-label="四、使用"><!--[--><!--[--><!--]--> 四、使用 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#五、通过代码使用" aria-label="五、通过代码使用"><!--[--><!--[--><!--]--> 五、通过代码使用 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#六、常见问题" aria-label="六、常见问题"><!--[--><!--[--><!--]--> 六、常见问题 <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#七、参考链接" aria-label="七、参考链接"><!--[--><!--[--><!--]--> 七、参考链接 <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="fw-printfenv-使用" tabindex="-1"><a class="header-anchor" href="#fw-printfenv-使用"><span>fw_printfenv 使用</span></a></h1><h2 id="一、编译" tabindex="-1"><a class="header-anchor" href="#一、编译"><span>一、编译</span></a></h2><p>先编译一遍 SDK</p><p>然后进入 <code>out/xm72020300/boot_builddir</code> 目录</p><p>编译 fw_printfenv 源码 <code>make ARCH=arm CROSS_COMPILE=arm-gcc7.3-linux-musleabi- envtools</code></p><h2 id="二、内核配置" tabindex="-1"><a class="header-anchor" href="#二、内核配置"><span>二、内核配置</span></a></h2><p>在使用 fw_printfenv 时遇到错误 <code>Error locking file /var/lock/fw_printfenv.lock</code></p><p>内核可能默认不配置 POSIX 标准文件锁定 API，所以程序执行到文件加锁与解锁的 flock() 时失败</p><p>在内核 menuconfig 中搜索 <code>CONFIG_FILE_LOCKING</code>，打卡如下配置，重新编译内核</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>[*] Enable POSIX file locking API
[*]   Enable Mandatory file locking (NEW)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、修改配置文件" tabindex="-1"><a class="header-anchor" href="#三、修改配置文件"><span>三、修改配置文件</span></a></h2><p>fw_env.config 文件用于配置 fw_printfenv 工具指向的环境变量分区。</p><p>以 xm72020300 为例，在 fw_env.config 文件注释掉其他行，新增以下配置：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># NOR example
# MTD device name       Device offset   Env. size       Flash sector size       Number of sectors
/dev/mtd1               0x0000          0x10000         0x20000                 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>MTD device name 通过 <code>cat /proc/mtd</code>，确认 bootargs 分区名为 mtd1</li><li>Device offset 为相对于 MTD device name 指定的分区的偏移，因为整个分区是单独的环境变量分区，因此是 0x0000</li><li>Env. size 查看 uboot 源码目录下的 <code>configs/xm72020300_quickstart_defconfig</code> 文件中的宏定义 <code>CONFIG_ENV_SIZE=0x10000</code></li><li>Flash sector 查看 uboot 源码目录下的 <code>include/configs/xm72020300.h</code> 文件中的宏定义 <code>#define CONFIG_ENV_OFFSET 0x20000</code> 和 <code>configs/xm72020300_quickstart_defconfig</code> 文件中的宏定义 <code>CONFIG_ENV_OFFSET=0x20000</code></li><li>Number of sectors 根据实际情况，一般为 1</li></ol><h2 id="四、使用" tabindex="-1"><a class="header-anchor" href="#四、使用"><span>四、使用</span></a></h2><p>将编译后的 fw_printfenv 执行程序拷贝到板端，fw_env.config 文件拷贝到板端 <code>/etc</code> 目录下</p><p><strong>必要</strong>，创建 fw_setenv 软链接，<code>ln -s fw_printfenv fw_setenv </code></p><p><code>fw_printfenv -h</code> 查看帮助</p><p><code>fw_printfenv </code> 相当于 printenv，打印环境变量信息</p><p><code>fw_setenv $变量 $值</code> 相当于 setenv+saveenv，设置和保存环境变量信息</p><h2 id="五、通过代码使用" tabindex="-1"><a class="header-anchor" href="#五、通过代码使用"><span>五、通过代码使用</span></a></h2><p>链接 lib.a 库，参考 fw_env_main.c 实现</p><h2 id="六、常见问题" tabindex="-1"><a class="header-anchor" href="#六、常见问题"><span>六、常见问题</span></a></h2><ol><li>如果内核打开了 POSIX 标准文件锁定 API 配置后仍然遇到 <code>Error locking file /var/lock/fw_printfenv.lock</code> ，检查该目录的文件系统是否为只读</li></ol><h2 id="七、参考链接" tabindex="-1"><a class="header-anchor" href="#七、参考链接"><span>七、参考链接</span></a></h2><p><a href="https://blog.csdn.net/m0_37383484/article/details/129561114?spm=1001.2101.3001.6650.5&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-5-129561114-blog-124358700.235%5Ev38%5Epc_relevant_anti_vip_base&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-5-129561114-blog-124358700.235%5Ev38%5Epc_relevant_anti_vip_base&amp;utm_relevant_index=8" target="_blank" rel="noopener noreferrer">海思 fw_printenv 和 fw_setenv 工具详解_积步千里的博客-CSDN博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://bbs.aw-ol.com/topic/2923/fw_printfenv%E4%B8%8D%E5%8F%AF%E7%94%A8-error-locking-file-var-lock-fw_printenv-lock" target="_blank" rel="noopener noreferrer">fw_printfenv不可用(Error locking file /var/lock/fw_printenv.lock) | 全志在线开发者论坛 (aw-ol.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://blog.csdn.net/xl19862005/article/details/118342662" target="_blank" rel="noopener noreferrer">在linux系统中通过fw_printenv查看和设置u-boot中的环境变量-CSDN博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: huangmingle@goke.com">huangmingle</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/my-docs/assets/app-CmOngkEL.js" defer></script>
  </body>
</html>
