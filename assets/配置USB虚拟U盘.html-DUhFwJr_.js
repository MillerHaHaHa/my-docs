import{_ as e,o as t,c as s,e as a}from"./app-CmOngkEL.js";const o={},n=a(`<h1 id="配置-usb-虚拟-u-盘" tabindex="-1"><a class="header-anchor" href="#配置-usb-虚拟-u-盘"><span>配置 USB 虚拟 U 盘</span></a></h1><ol><li><p>按照文档《外围设备驱动 操作指南》2.2.3 图 2-2，2-3，2-6 修改内核配置</p></li><li><p>打开内核配置宏 <code>CONFIG_BLK_DEV_LOOP</code></p></li><li><p>重新编译和烧录 kernel</p></li><li><p>上电后执行命令，创建内存虚拟节点：</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>dd <span class="token keyword">if</span>=<span class="token operator">/</span>dev/zero of=<span class="token operator">/</span>dev/test bs=1M count=2
mkfs<span class="token punctuation">.</span>vfat <span class="token operator">/</span>dev/test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>按照文档 2.3.5 操作，执行以下命令：</p><p>ko 直接编译进内核，可以跳过 insmod 步骤</p><p><code>Config_Storage.sh</code> 脚本在 <code>sdk/tools/utils/usb_tools</code> 下</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>export VID=&quot;0x0525&quot;
export PID=&quot;0xa4a5&quot;
export MANUFACTURER=&quot;XMEDIA&quot;
export PRODUCT=&quot;MassStorage&quot;
export SERIALNUMBER=&quot;1234567890&quot;
export MEMORY=/dev/test
./Config_Storage.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>将单板和 PC 相连，即可在 PC 端看到 U 盘设备</p></li><li><p>如果要在板端查看盘符内容，在单板上 <code>mount -t vfat /dev/test /mnt</code></p></li></ol>`,2),i=[n];function l(d,r){return t(),s("div",null,i)}const p=e(o,[["render",l],["__file","配置USB虚拟U盘.html.vue"]]),u=JSON.parse('{"path":"/work/goke/%E9%85%8D%E7%BD%AEUSB%E8%99%9A%E6%8B%9FU%E7%9B%98.html","title":"配置 USB 虚拟 U 盘","lang":"zh-CN","frontmatter":{},"headers":[],"git":{"updatedTime":1713183499000,"contributors":[{"name":"huangmingle","email":"huangmingle@goke.com","commits":1}]},"filePathRelative":"work/goke/配置USB虚拟U盘.md"}');export{p as comp,u as data};
